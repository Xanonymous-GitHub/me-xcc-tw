(window.webpackJsonp=window.webpackJsonp||[]).push([["Form~31ecd969"],{"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7");function r(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)}))}}},"211c":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),o={class:"add-work"},i=Object(r.h)("div",{class:"logo my-3 my-sm-5"},[Object(r.h)("svg",{class:"d-svg",viewBox:"0 0 1 1"},[Object(r.h)("use",{"xlink:href":"#todo.svg"})]),Object(r.h)("h1",{class:"text-white fw-bolder main-title d-inline-block align-middle my-0 user-select-none"},"Works!")],-1),a={class:"work-form px-5 py-5 rounded-3 shadow my-3 text-start"},c=Object(r.h)("svg",{class:"d-svg position-relative mw-100",style:{width:"100px"},viewBox:"0 0 1 1"},[Object(r.h)("use",{"xlink:href":"#image.svg"})],-1),s=Object(r.h)("label",{class:"form-label fw-bolder",for:"title-input"},"*Title",-1),u=Object(r.h)("label",{class:"form-label fw-bolder",for:"sub-title-input"},"*Subtitle",-1);n("caad"),n("d3b7"),n("25f0"),n("498a");var l=n("5530"),f=(n("96cf"),n("1da1")),d=(n("b340"),n("a814"),n("e017")),p=n.n(d),b=n("21a1"),g=n.n(b),m=new p.a({id:"image.svg",use:"image.svg-usage",viewBox:"0 -21 511.98744 511",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 -21 511.98744 511" id="image.svg"><defs></defs><path fill="#eceff1" d="M133.320312 373.828125c-34.152343 0-64.53125-21.867187-75.5625-54.421875l-.746093-2.453125c-2.601563-8.621094-3.691407-15.871094-3.691407-23.125V148.375L1.566406 321.132812c-6.65625 25.410157 8.511719 51.753907 33.960938 58.773438L365.40625 468.25c4.117188 1.066406 8.234375 1.578125 12.289062 1.578125 21.246094 0 40.660157-14.101563 46.101563-34.882813l19.21875-61.117187zm0 0" /><path fill="#eceff1" d="M511.988281 48.492188v245.335937c0 26.453125-21.546875 48-48 48H133.320312c-2.132812 0-4.265624-.214844-6.1875-.429687-22.398437-2.769532-39.890624-21.117188-41.597656-43.730469-.214844-1.28125-.214844-2.5625-.214844-3.839844V48.492188c0-26.453126 21.546876-48 48-48h330.667969c26.453125 0 48 21.546874 48 48zm0 0" /><path fill="#ffc107" d="M234.652344 107.160156c0 23.5625-19.101563 42.667969-42.664063 42.667969-23.566406 0-42.667969-19.105469-42.667969-42.667969s19.101563-42.667968 42.667969-42.667968c23.5625 0 42.664063 19.105468 42.664063 42.667968zm0 0" /><path fill="#388e3c" d="M511.988281 233.878906v59.949219c0 26.453125-21.546875 48-48 48H133.320312c-2.132812 0-4.265624-.214844-6.1875-.429687l219.734376-219.730469c14.507812-14.507813 38.398437-14.507813 52.90625 0zm0 0" /><path fill="#4caf50" d="M385.265625 341.828125H133.320312c-2.132812 0-4.265624-.214844-6.1875-.429687-22.398437-2.769532-39.890624-21.117188-41.597656-43.730469l101.332032-101.335938c14.507812-14.503906 38.398437-14.503906 52.90625 0zm0 0" /></symbol>'}),h=(g.a.add(m),n("ff34")),v=n("bc3a"),w=n.n(v),y=n("5104"),O=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(e,n){var r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("file",e),n&&r.append("type",n),t.prev=3,t.next=6,w.a.post("https://asia-northeast1-npc-services.cloudfunctions.net/Image",r,{headers:{"Content-Type":"multipart/form-data"}});case 6:return o=t.sent,i=o.data,t.abrupt("return",i);case 11:return t.prev=11,t.t0=t.catch(3),t.abrupt("return",Object(y.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}(),x=function(t,e){if(t&&""!==t){var n=e.querySelector(".picture"),r=n.childNodes[0];n.removeChild(r);var o=document.createElement("img");o.setAttribute("style","\n      width: auto;\n      max-width: 100%;\n      height: auto;\n      max-height: 100%;\n      position: relative;\n      margin: 0 auto;\n      left: 50%;\n      transform: translateX(-50%);\n    "),o.setAttribute("src",t),o.setAttribute("alt",""),n.appendChild(o)}},j=function(t){return new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return n(t)}}))},k=Object(r.j)({name:"Form",components:{CircleProgress:Object(r.i)((function(){return n.e("chunk-f0327816").then(n.bind(null,"c9f7"))})),Done:Object(r.i)((function(){return n.e("chunk-7df00db5").then(n.bind(null,"c48c"))}))},setup:function(){var t=Object(r.w)({title:"",subtitle:"",thumbnailUrl:"",thumbnail:void 0,creating:!1,changingImg:!1,formKey:0,progressMsg:"",done:!1}),e=Object(r.x)({}),n=Object(r.x)({}),o=Object(r.m)("db"),i=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.changingImg=!0,r=n.target.files[0],!c(r)){e.next=14;break}if(!(r.size<10<<20)){e.next=11;break}return t.thumbnail=r,e.next=7,j(t.thumbnail);case 7:o=e.sent,x(o,document.getElementById("new-work-form")),e.next=12;break;case 11:alert("file too big!");case 12:e.next=15;break;case 14:alert("Invalid file type!");case 15:t.changingImg=!1;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,i,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.creating=!0,n=t.title.toString().trim(),r=t.subtitle.toString().trim(),i="start",!n||!r){e.next=25;break}if(a="",c="",!t.thumbnail){e.next=11;break}return t.progressMsg="uploading image...",e.next=10,s(t.thumbnail);case 10:c=e.sent;case 11:return c&&(a=c),l=Date.now(),e.prev=13,t.progressMsg="creating work...",e.next=17,o.collection("/works").doc(l.toString()).set({title:n,subtitle:r,thumbnail:a,createdAt:Object(h.getNewTimeStamp)(new Date)});case 17:i="done",e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),alert(e.t0);case 23:e.next=26;break;case 25:i="inputErr";case 26:if("done"!==i){e.next=31;break}return t.done=!0,document.querySelector(".done").classList.add("drawn"),e.next=31,new Promise((function(t){return setTimeout((function(){return t()}),3e3)}));case 31:t.creating=!1,"inputErr"===i?alert("please provide title and subtitle!!"):u();case 33:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(){return e.apply(this,arguments)}}(),c=function(t){return t&&["image/gif","image/jpeg","image/png"].includes(t.type)},s=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e,"webp");case 2:if(n=t.sent,r=n.url){t.next=7;break}return alert("Fail to upload thumbnail!"),t.abrupt("return",null);case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){t.title="",t.subtitle="",t.thumbnail=void 0,t.formKey++,t.done=!1},d=Object(r.c)((function(){return console.log(!t.thumbnailUrl&&n.value.checkValidity()),!t.thumbnailUrl&&n.value.checkValidity()}));return Object(r.q)((function(){document.dispatchEvent(new Event("app-rendered"))})),Object(l.a)({createWork:a,onFileChanged:i,uploader:e,uploadButtonClicked:function(){e.value.click()},validateThumbnailInputUrl:d,thumbnailInput:n,cancelUploadImg:function(){t.thumbnail=void 0,t.formKey++}},Object(r.D)(t))}});k.render=function(t,e,n,l,f,d){var p=Object(r.z)("CircleProgress"),b=Object(r.z)("Done");return Object(r.s)(),Object(r.e)("main",o,[i,Object(r.h)("div",a,[(Object(r.s)(),Object(r.e)("form",{id:"new-work-form",key:t.formKey,class:"w-100 mx-auto position-relative"},[t.thumbnail&&!t.creating?(Object(r.s)(),Object(r.e)("button",{key:0,class:"btn btn-danger position-absolute cancel-upload shadow rounded-circle",type:"button",onClick:e[1]||(e[1]=Object(r.K)((function(){return t.cancelUploadImg&&t.cancelUploadImg.apply(t,arguments)}),["prevent","stop"]))},"Ã— ")):Object(r.f)("",!0),t.creating&&!t.done?(Object(r.s)(),Object(r.e)(p,{key:1,msg:t.progressMsg},null,8,["msg"])):Object(r.f)("",!0),Object(r.J)(Object(r.h)(b,null,null,512),[[r.G,t.creating]]),Object(r.h)("div",{class:[{default:!t.thumbnail,invisible:t.creating},"picture my-3 position-relative px-3 py-3"],style:{height:"200px"},onClick:e[2]||(e[2]=Object(r.K)((function(){return t.uploadButtonClicked&&t.uploadButtonClicked.apply(t,arguments)}),["prevent","stop"]))},[c],2),Object(r.h)("div",{class:[{invisible:t.creating},"mb-3"]},[s,Object(r.J)(Object(r.h)("input",{id:"title-input","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.title=e}),class:"form-control",type:"text"},null,512),[[r.F,t.title]])],2),Object(r.h)("div",{class:[{invisible:t.creating},"mb-3"]},[u,Object(r.J)(Object(r.h)("input",{id:"sub-title-input","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.subtitle=e}),class:"form-control",type:"text"},null,512),[[r.F,t.subtitle]])],2),Object(r.h)("button",{class:[{disabled:t.creating||!t.title||!t.subtitle},"btn btn-success btn-sm mx-1 my-1 text-nowrap fw-bolder mw-100 overflow-hidden"],autofocus:"",type:"submit",onClick:e[5]||(e[5]=Object(r.K)((function(){return t.createWork&&t.createWork.apply(t,arguments)}),["prevent","stop"]))}," Create Work ",2),Object(r.h)("button",{class:[{disabled:t.creating||t.changingImg},"btn btn-primary btn-sm mx-1 my-1 text-nowrap fw-bolder mw-100 overflow-hidden"],type:"submit",onClick:e[6]||(e[6]=Object(r.K)((function(){return t.uploadButtonClicked&&t.uploadButtonClicked.apply(t,arguments)}),["prevent","stop"]))},Object(r.C)(t.thumbnail?"Alter":"Upload")+" img ",3),Object(r.h)("input",{ref:"uploader",accept:"image/jpeg,image/png,image/gif",class:"d-none",type:"file",onChange:e[7]||(e[7]=function(e){return t.onFileChanged(e)})},null,544)]))])])};e.default=k},5104:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&t.response&&t.response.data?t.response.data:{statusCode:t.status||502,message:"Unknown Error!"}}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},a814:function(t,e,n){"use strict";var r=n("e017"),o=n.n(r),i=n("21a1"),a=n.n(i),c=new o.a({id:"todo.svg",use:"todo.svg-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" id="todo.svg"><defs></defs><defs><linearGradient id="todo.svg_a" x1="34.9523037%" x2="116.039609%" y1="0%" y2="115.484477%"><stop offset="0%" stop-color="#1700FF" /><stop offset="100%" stop-color="#B10EF1" /></linearGradient><linearGradient id="todo.svg_d" x1="0%" x2="115.291753%" y1="0%" y2="112.548614%"><stop offset="0%" stop-color="#1700FF" /><stop offset="83.2001616%" stop-color="#9E0CF3" /><stop offset="100%" stop-color="#B10EF1" /></linearGradient><filter id="todo.svg_b" width="162.4%" height="162.5%" x="-35.7%" y="-28.3%" filterUnits="objectBoundingBox"><feOffset dx="-3" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation="6.5"></feGaussianBlur><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0296505968 0 0 0 0 0.0172602666 0 0 0 0 0.100446429 0 0 0 0.423177083 0"></feColorMatrix></filter><filter id="todo.svg_e" width="203.1%" height="225.8%" x="-51.5%" y="-62.9%" filterUnits="objectBoundingBox"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation="6.5"></feGaussianBlur><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.588937953 0"></feColorMatrix></filter><rect id="todo.svg_c" width="67.2578578" height="67.2008596" x="19.8783454" y="5.46149939" rx="8.99999976" /><path id="todo.svg_f" d="M40.2086259 6.21042694c-.9605844-.96889999-2.1058791-1.45333806-3.435922-1.45333806-1.3300381 0-2.4630185.48443807-3.3989742 1.45333806L16.3049725 23.7622477l-4.2856632-4.397272c-.9359557-.9688953-2.0689361-1.4533381-3.39897423-1.4533381-1.33004238 0-2.47533756.4844428-3.43592197 1.4533381-.93595412.9688952-1.40392414 2.1427301-1.40392414 3.5215429s.46797002 2.5526477 1.40392414 3.5215429l7.6846374 7.9001861c.9605844.9688952 2.1058791 1.4533357 3.435922 1.4533357 1.3300381 0 2.4630185-.4844405 3.3989742-1.4533357l20.5046792-21.0547348c.9359557-.993737 1.4039241-2.1737871 1.4039241-3.54017901 0-1.36638714-.4679684-2.53401163-1.4039241-3.50290685z" /></defs><g fill="none" fill-rule="evenodd"><path fill="url(#todo.svg_a)" d="M20.0219734 15.1240886l54.1609548-.9310311c4.9698284-.0854317 9.0679264 3.8741541 9.1533582 8.8439825a9.00084428 9.00084428 0 01.0013294.1546878v48.8511766c0 4.9102572-3.93578 8.914275-8.8453119 8.9986703l-54.1609548.931031c-4.9698284.0854317-9.0679264-3.8741541-9.1533582-8.8439825a9.00083556 9.00083556 0 01-.0013294-.1546878V24.1227589c0-4.9102573 3.93578-8.9142751 8.8453119-8.9986703z" transform="rotate(156 45.49674793 52.01747856)" /><g transform="rotate(-9 105.7853513 53.4792682)"><use fill="#000" filter="url(#todo.svg_b)" xlink:href="#todo.svg_c" /><use fill="#FBFBFB" xlink:href="#todo.svg_c" /></g><g><path fill="url(#todo.svg_d)" d="M41.1093892 10.5623533c-.9605844-.96889997-2.1058791-1.45333804-3.4359219-1.45333804-1.3300382 0-2.4630185.48443807-3.3989743 1.45333804L17.2057358 28.1141741l-4.2856631-4.3972721c-.9359558-.9688952-2.0689361-1.453338-3.39897427-1.453338-1.33004238 0-2.47533757.4844428-3.43592197 1.453338-.93595412.9688953-1.40392414 2.1427302-1.40392414 3.521543s.46797002 2.5526477 1.40392414 3.5215429l7.68463744 7.9001861c.9605844.9688952 2.1058791 1.4533356 3.4359219 1.4533356 1.3300382 0 2.4630185-.4844404 3.3989743-1.4533356l20.5046791-21.0547348c.9359558-.993737 1.4039242-2.1737871 1.4039242-3.540179 0-1.3663872-.4679684-2.5340117-1.4039242-3.5029069z" opacity=".3" transform="rotate(-16 120.4240348 -70.61928384)" /><path fill="url(#todo.svg_d)" d="M42.0101526 14.2623533c-.9605844-.9689-2.1058791-1.453338-3.435922-1.453338-1.3300381 0-2.4630185.484438-3.3989742 1.453338L18.1064992 31.8141741 13.820836 27.416902c-.9359557-.9688952-2.0689361-1.453338-3.3989742-1.453338-1.33004239 0-2.47533758.4844428-3.43592198 1.453338-.20322805.2103807-.38439184.4304238-.54349152.6601297-.573624.8281902-.86043262 1.7819885-.86043262 2.8614133 0 1.3788128.46797001 2.5526477 1.40392414 3.5215429l7.68463738 7.9001861c.9605844.9688952 2.1058791 1.4533356 3.435922 1.4533356 1.3300381 0 2.4630185-.4844404 3.3989742-1.4533356l20.5046792-21.0547348c.9359557-.993737 1.4039241-2.1737871 1.4039241-3.540179 0-1.3663872-.4679684-2.5340117-1.4039241-3.5029069z" opacity=".2" transform="rotate(-16 121.3247978 -66.91928384)" /><g transform="rotate(-16 119.5232708 -74.97120984)"><use fill="#000" filter="url(#todo.svg_e)" xlink:href="#todo.svg_f" /><use fill="url(#todo.svg_d)" xlink:href="#todo.svg_f" /></g></g></g></symbol>'});a.a.add(c)},b340:function(t,e,n){},e017:function(t,e,n){(function(e){var n;n=function(){"use strict";var t=function(t){var e=t.id,n=t.viewBox,r=t.content;this.id=e,this.viewBox=n,this.content=r};function n(t,e){return t(e={exports:{}},e.exports),e.exports}t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))},"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var r=n((function(t,e){t.exports=function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(e,n){var o;return n&&!0===n.clone&&t(e)?r((o=e,Array.isArray(o)?[]:{}),e,n):e}function n(n,o,i){var a=n.slice();return o.forEach((function(o,c){void 0===a[c]?a[c]=e(o,i):t(o)?a[c]=r(n[c],o,i):-1===n.indexOf(o)&&a.push(e(o,i))})),a}function r(o,i,a){var c=Array.isArray(i),s=(a||{arrayMerge:n}).arrayMerge||n;return c?Array.isArray(o)?s(o,i,a):e(i,a):function(n,o,i){var a={};return t(n)&&Object.keys(n).forEach((function(t){a[t]=e(n[t],i)})),Object.keys(o).forEach((function(c){t(o[c])&&n[c]?a[c]=r(n[c],o[c],i):a[c]=e(o[c],i)})),a}(o,i,a)}return r.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return r(t,n,e)}))},r}()})),o=n((function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default})),i=o.svg,a=o.xlink,c={};c[i.name]=i.uri,c[a.name]=a.uri;var s=function(t,e){return void 0===t&&(t=""),"<svg "+function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(r(c,e||{}))+">"+t+"</svg>"};return function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var t=this.stringify();return function(t){var e=!!document.importNode,n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(n,!0):n}(s(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(t)},t.exports=n()}).call(this,n("c8ba"))}}]);